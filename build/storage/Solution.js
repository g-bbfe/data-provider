"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
//存储服务
var Solution = {};
var _memoryStorage = {};

Solution["localStorage"] = {
    test: function test() {
        try {
            return window.localStorage ? true : false;
        } catch (e) {
            return false;
        }
    },
    methods: {
        init: function init(ns) {},
        set: function set(ns, key, value) {
            try {
                localStorage.setItem(ns + key, value);
            } catch (e) {
                throw e;
            }
        }, //throw
        get: function get(ns, key) {
            return localStorage.getItem(ns + key);
        },
        remove: function remove(ns, key) {
            localStorage.removeItem(ns + key);
        },
        clear: function clear(ns) {
            if (!ns) {
                localStorage.clear();
            } else {
                for (var i = localStorage.length - 1, key; key = localStorage.key(i--);) {
                    if (key && key.indexOf(ns) === 0) {
                        localStorage.removeItem(key);
                    }
                }
            }
        }
    }
};
Solution["userData"] = {
    test: function test() {
        try {
            return window.ActiveXObject && document.documentElement.addBehavior ? true : false;
        } catch (e) {
            return false;
        }
    },
    methods: {
        _owners: {},
        init: function init(ns) {
            if (!this._owners[ns]) {
                if (document.getElementById(ns)) {
                    this._owners[ns] = document.getElementById(ns);
                } else {
                    var el = document.createElement('script'),
                        head = document.head || document.getElementsByTagName("head")[0] || document.documentElement;
                    el.id = ns;
                    el.style.display = 'none';
                    el.addBehavior('#default#userdata');
                    head.insertBefore(el, head.firstChild);
                    this._owners[ns] = el;
                }
                try {
                    this._owners[ns].load(ns);
                } catch (e) {}
                var _self = this;
                window.attachEvent("onunload", function () {
                    _self._owners[ns] = null;
                });
            }
        },
        set: function set(ns, key, value) {
            if (this._owners[ns]) {
                try {
                    this._owners[ns].setAttribute(key, value);
                    this._owners[ns].save(ns);
                } catch (e) {
                    throw e;
                }
            }
        },
        get: function get(ns, key) {
            if (this._owners[ns]) {
                this._owners[ns].load(ns);
                return this._owners[ns].getAttribute(key) || null;
            }
            return null;
        },
        remove: function remove(ns, key) {
            if (this._owners[ns]) {
                this._owners[ns].removeAttribute(key);
                this._owners[ns].save(ns);
            }
        },
        clear: function clear(ns) {
            if (this._owners[ns]) {
                var attributes = this._owners[ns].XMLDocument.documentElement.attributes;
                this._owners[ns].load(ns);
                for (var i = 0, attr; attr = attributes[i]; i++) {
                    this._owners[ns].removeAttribute(attr.name);
                }
                this._owners[ns].save(ns);
            }
        }
    }
};

Solution["memory"] = {
    test: function test() {
        return true;
    },
    methods: {
        init: function init(ns) {
            _memoryStorage[ns] = {};
        },
        get: function get(ns, key) {
            return _memoryStorage[ns][key];
        },
        set: function set(ns, key, value) {
            _memoryStorage[ns][key] = value;
        },
        remove: function remove(ns, key) {
            delete _memoryStorage[ns][key];
        },
        clear: function clear(ns) {
            delete _memoryStorage[ns];
        }
    }
};

exports["default"] = Solution;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdG9yYWdlL1NvbHV0aW9uLmpzIl0sIm5hbWVzIjpbIlNvbHV0aW9uIiwiX21lbW9yeVN0b3JhZ2UiLCJ0ZXN0Iiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZSIsIm1ldGhvZHMiLCJpbml0IiwibnMiLCJzZXQiLCJrZXkiLCJ2YWx1ZSIsInNldEl0ZW0iLCJnZXQiLCJnZXRJdGVtIiwicmVtb3ZlIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiaSIsImxlbmd0aCIsImluZGV4T2YiLCJBY3RpdmVYT2JqZWN0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJhZGRCZWhhdmlvciIsIl9vd25lcnMiLCJnZXRFbGVtZW50QnlJZCIsImVsIiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlkIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImxvYWQiLCJfc2VsZiIsImF0dGFjaEV2ZW50Iiwic2V0QXR0cmlidXRlIiwic2F2ZSIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImF0dHJpYnV0ZXMiLCJYTUxEb2N1bWVudCIsImF0dHIiLCJuYW1lIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0EsSUFBSUEsV0FBVyxFQUFmO0FBQ0EsSUFBSUMsaUJBQWlCLEVBQXJCOztBQUVBRCxTQUFTLGNBQVQsSUFBMkI7QUFDdkJFLFVBQU0sZ0JBQVc7QUFDYixZQUFJO0FBQ0EsbUJBQU9DLE9BQU9DLFlBQVAsR0FBc0IsSUFBdEIsR0FBNkIsS0FBcEM7QUFDSCxTQUZELENBRUUsT0FBT0MsQ0FBUCxFQUFVO0FBQ1IsbUJBQU8sS0FBUDtBQUNIO0FBQ0osS0FQc0I7QUFRdkJDLGFBQVM7QUFDTEMsY0FBTSxjQUFTQyxFQUFULEVBQWEsQ0FBRSxDQURoQjtBQUVMQyxhQUFLLGFBQVNELEVBQVQsRUFBYUUsR0FBYixFQUFrQkMsS0FBbEIsRUFBeUI7QUFDMUIs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LE9BQU9GLFdBQVd6QixDQUFYLENBQTdCLEVBQTRDQSxHQUE1QyxFQUFpRDtBQUM3Qyx5QkFBS08sT0FBTCxDQUFhakIsRUFBYixFQUFpQmtDLGVBQWpCLENBQWlDRyxLQUFLQyxJQUF0QztBQUNIO0FBQ0QscUJBQUtyQixPQUFMLENBQWFqQixFQUFiLEVBQWlCZ0MsSUFBakIsQ0FBc0JoQyxFQUF0QjtBQUNIO0FBQ0o7QUF4REk7QUFSVSxDQUF2Qjs7QUFvRUFSLFNBQVMsUUFBVCxJQUFxQjtBQUNqQkUsVUFBTSxnQkFBVztBQUNiLGVBQU8sSUFBUDtBQUNILEtBSGdCO0FBSWpCSSxhQUFTO0FBQ0xDLGNBQU0sY0FBU0MsRUFBVCxFQUFhO0FBQ2ZQLDJCQUFlTyxFQUFmLElBQXFCLEVBQXJCO0FBQ0gsU0FISTtBQUlMSyxhQUFLLGFBQVNMLEVBQVQsRUFBYUUsR0FBYixFQUFrQjtBQUNuQixtQkFBT1QsZUFBZU8sRUFBZixFQUFtQkUsR0FBbkIsQ0FBUDtBQUNILFNBTkk7QUFPTEQsYUFBSyxhQUFTRCxFQUFULEVBQWFFLEdBQWIsRUFBa0JDLEtBQWxCLEVBQXlCO0FBQzFCViwyQkFBZU8sRUFBZixFQUFtQkUsR0FBbkIsSUFBMEJDLEtBQTFCO0FBQ0gsU0FUSTtBQVVMSSxnQkFBUSxnQkFBU1AsRUFBVCxFQUFhRSxHQUFiLEVBQWtCO0FBQ3RCLG1CQUFPVCxlQUFlTyxFQUFmLEVBQW1CRSxHQUFuQixDQUFQO0FBQ0gsU0FaSTtBQWFMTyxlQUFPLGVBQVNULEVBQVQsRUFBYTtBQUNoQixtQkFBT1AsZUFBZU8sRUFBZixDQUFQO0FBQ0g7QUFmSTtBQUpRLENBQXJCOztxQkF1QmVSLFEiLCJmaWxlIjoiU29sdXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+WtmOWCqOacjeWKoVxudmFyIFNvbHV0aW9uID0ge307XG52YXIgX21lbW9yeVN0b3JhZ2UgPSB7fTtcblxuU29sdXRpb25bXCJsb2NhbFN0b3JhZ2VcIl0gPSB7XG4gICAgdGVzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKG5zKSB7fSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihucywga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShucyArIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIC8vdGhyb3dcbiAgICAgICAgZ2V0OiBmdW5jdGlvbihucywga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0obnMgKyBrZXkpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKG5zLCBrZXkpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG5zICsga2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKG5zKSB7XG4gICAgICAgICAgICBpZiAoIW5zKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBsb2NhbFN0b3JhZ2UubGVuZ3RoIC0gMSwga2V5OyBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGktLSk7KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YobnMpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblNvbHV0aW9uW1widXNlckRhdGFcIl0gPSB7XG4gICAgdGVzdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LkFjdGl2ZVhPYmplY3QgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEJlaGF2aW9yID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgICBfb3duZXJzOiB7fSxcbiAgICAgICAgaW5pdDogZnVuY3Rpb24obnMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fb3duZXJzW25zXSkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChucykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXJzW25zXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5zKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsLmlkID0gbnM7XG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGVsLmFkZEJlaGF2aW9yKCcjZGVmYXVsdCN1c2VyZGF0YScpO1xuICAgICAgICAgICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShlbCwgaGVhZC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXJzW25zXSA9IGVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lcnNbbnNdLmxvYWQobnMpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuX293bmVyc1tuc10gPSBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5zLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXJzW25zXSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyc1tuc10uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lcnNbbnNdLnNhdmUobnMpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldDogZnVuY3Rpb24obnMsIGtleSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyc1tuc10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lcnNbbnNdLmxvYWQobnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lcnNbbnNdLmdldEF0dHJpYnV0ZShrZXkpIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihucywga2V5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXJzW25zXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyc1tuc10ucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXJzW25zXS5zYXZlKG5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKG5zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXJzW25zXSkge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5fb3duZXJzW25zXS5YTUxEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lcnNbbnNdLmxvYWQobnMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBhdHRyOyBhdHRyID0gYXR0cmlidXRlc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyc1tuc10ucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXJzW25zXS5zYXZlKG5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cblNvbHV0aW9uW1wibWVtb3J5XCJdID0ge1xuICAgIHRlc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24obnMpIHtcbiAgICAgICAgICAgIF9tZW1vcnlTdG9yYWdlW25zXSA9IHt9XG4gICAgICAgIH0sXG4gICAgICAgIGdldDogZnVuY3Rpb24obnMsIGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIF9tZW1vcnlTdG9yYWdlW25zXVtrZXldXG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24obnMsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIF9tZW1vcnlTdG9yYWdlW25zXVtrZXldID0gdmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihucywga2V5KSB7XG4gICAgICAgICAgICBkZWxldGUgX21lbW9yeVN0b3JhZ2VbbnNdW2tleV1cbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKG5zKSB7XG4gICAgICAgICAgICBkZWxldGUgX21lbW9yeVN0b3JhZ2VbbnNdXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTb2x1dGlvbjtcbiJdfQ==