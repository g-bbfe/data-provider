{"version":3,"sources":["../../src/storage/Solution.js"],"names":["Solution","_memoryStorage","test","window","localStorage","e","methods","init","ns","set","key","value","setItem","get","getItem","remove","removeItem","clear","i","length","indexOf","ActiveXObject","document","documentElement","addBehavior","_owners","getElementById","el","createElement","head","getElementsByTagName","id","style","display","insertBefore","firstChild","load","_self","attachEvent","setAttribute","save","getAttribute","removeAttribute","attributes","XMLDocument","attr","name"],"mappings":";;;;;AAAA;AACA,IAAIA,WAAW,EAAf;AACA,IAAIC,iBAAiB,EAArB;;AAEAD,SAAS,cAAT,IAA2B;AACvBE,UAAM,gBAAW;AACb,YAAI;AACA,mBAAOC,OAAOC,YAAP,GAAsB,IAAtB,GAA6B,KAApC;AACH,SAFD,CAEE,OAAOC,CAAP,EAAU;AACR,mBAAO,KAAP;AACH;AACJ,KAPsB;AAQvBC,aAAS;AACLC,cAAM,cAASC,EAAT,EAAa,CAAE,CADhB;AAELC,aAAK,aAASD,EAAT,EAAaE,GAAb,EAAkBC,KAAlB,EAAyB;AAC1B,gBAAI;AACAP,6BAAaQ,OAAb,CAAqBJ,KAAKE,GAA1B,EAA+BC,KAA/B;AACH,aAFD,CAEE,OAAON,CAAP,EAAU;AACR,sBAAMA,CAAN;AACH;AACJ,SARI,EAQF;AACHQ,aAAK,aAASL,EAAT,EAAaE,GAAb,EAAkB;AACnB,mBAAON,aAAaU,OAAb,CAAqBN,KAAKE,GAA1B,CAAP;AACH,SAXI;AAYLK,gBAAQ,gBAASP,EAAT,EAAaE,GAAb,EAAkB;AACtBN,yBAAaY,UAAb,CAAwBR,KAAKE,GAA7B;AACH,SAdI;AAeLO,eAAO,eAAST,EAAT,EAAa;AAChB,gBAAI,CAACA,EAAL,EAAS;AACLJ,6BAAaa,KAAb;AACH,aAFD,MAEO;AACH,qBAAK,IAAIC,IAAId,aAAae,MAAb,GAAsB,CAA9B,EAAiCT,GAAtC,EAA2CA,MAAMN,aAAaM,GAAb,CAAiBQ,GAAjB,CAAjD,GAAyE;AACrE,wBAAIR,OAAOA,IAAIU,OAAJ,CAAYZ,EAAZ,MAAoB,CAA/B,EAAkC;AAC9BJ,qCAAaY,UAAb,CAAwBN,GAAxB;AACH;AACJ;AACJ;AACJ;AAzBI;AARc,CAA3B;AAoCAV,SAAS,UAAT,IAAuB;AACnBE,UAAM,gBAAW;AACb,YAAI;AACA,mBAAOC,OAAOkB,aAAP,IAAwBC,SAASC,eAAT,CAAyBC,WAAjD,GAA+D,IAA/D,GAAsE,KAA7E;AACH,SAFD,CAEE,OAAOnB,CAAP,EAAU;AACR,mBAAO,KAAP;AACH;AACJ,KAPkB;AAQnBC,aAAS;AACLmB,iBAAS,EADJ;AAELlB,cAAM,cAASC,EAAT,EAAa;AACf,gBAAI,CAAC,KAAKiB,OAAL,CAAajB,EAAb,CAAL,EAAuB;AACnB,oBAAIc,SAASI,cAAT,CAAwBlB,EAAxB,CAAJ,EAAiC;AAC7B,yBAAKiB,OAAL,CAAajB,EAAb,IAAmBc,SAASI,cAAT,CAAwBlB,EAAxB,CAAnB;AACH,iBAFD,MAEO;AACH,wBAAImB,KAAKL,SAASM,aAAT,CAAuB,QAAvB,CAAT;AAAA,wBACIC,OAAOP,SAASO,IAAT,IAAiBP,SAASQ,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAjB,IAA6DR,SAASC,eADjF;AAEAI,uBAAGI,EAAH,GAAQvB,EAAR;AACAmB,uBAAGK,KAAH,CAASC,OAAT,GAAmB,MAAnB;AACAN,uBAAGH,WAAH,CAAe,mBAAf;AACAK,yBAAKK,YAAL,CAAkBP,EAAlB,EAAsBE,KAAKM,UAA3B;AACA,yBAAKV,OAAL,CAAajB,EAAb,IAAmBmB,EAAnB;AACH;AACD,oBAAI;AACA,yBAAKF,OAAL,CAAajB,EAAb,EAAiB4B,IAAjB,CAAsB5B,EAAtB;AACH,iBAFD,CAEE,OAAOH,CAAP,EAAU,CAAE;AACd,oBAAIgC,QAAQ,IAAZ;AACAlC,uBAAOmC,WAAP,CAAmB,UAAnB,EAA+B,YAAW;AACtCD,0BAAMZ,OAAN,CAAcjB,EAAd,IAAoB,IAApB;AACH,iBAFD;AAGH;AACJ,SAvBI;AAwBLC,aAAK,aAASD,EAAT,EAAaE,GAAb,EAAkBC,KAAlB,EAAyB;AAC1B,gBAAI,KAAKc,OAAL,CAAajB,EAAb,CAAJ,EAAsB;AAClB,oBAAI;AACA,yBAAKiB,OAAL,CAAajB,EAAb,EAAiB+B,YAAjB,CAA8B7B,GAA9B,EAAmCC,KAAnC;AACA,yBAAKc,OAAL,CAAajB,EAAb,EAAiBgC,IAAjB,CAAsBhC,EAAtB;AACH,iBAHD,CAGE,OAAOH,CAAP,EAAU;AACR,0BAAMA,CAAN;AACH;AACJ;AACJ,SAjCI;AAkCLQ,aAAK,aAASL,EAAT,EAAaE,GAAb,EAAkB;AACnB,gBAAI,KAAKe,OAAL,CAAajB,EAAb,CAAJ,EAAsB;AAClB,qBAAKiB,OAAL,CAAajB,EAAb,EAAiB4B,IAAjB,CAAsB5B,EAAtB;AACA,uBAAO,KAAKiB,OAAL,CAAajB,EAAb,EAAiBiC,YAAjB,CAA8B/B,GAA9B,KAAsC,IAA7C;AACH;AACD,mBAAO,IAAP;AACH,SAxCI;AAyCLK,gBAAQ,gBAASP,EAAT,EAAaE,GAAb,EAAkB;AACtB,gBAAI,KAAKe,OAAL,CAAajB,EAAb,CAAJ,EAAsB;AAClB,qBAAKiB,OAAL,CAAajB,EAAb,EAAiBkC,eAAjB,CAAiChC,GAAjC;AACA,qBAAKe,OAAL,CAAajB,EAAb,EAAiBgC,IAAjB,CAAsBhC,EAAtB;AACH;AACJ,SA9CI;AA+CLS,eAAO,eAAST,EAAT,EAAa;AAChB,gBAAI,KAAKiB,OAAL,CAAajB,EAAb,CAAJ,EAAsB;AAClB,oBAAImC,aAAa,KAAKlB,OAAL,CAAajB,EAAb,EAAiBoC,WAAjB,CAA6BrB,eAA7B,CAA6CoB,UAA9D;AACA,qBAAKlB,OAAL,CAAajB,EAAb,EAAiB4B,IAAjB,CAAsB5B,EAAtB;AACA,qBAAK,IAAIU,IAAI,CAAR,EAAW2B,IAAhB,EAAsBA,OAAOF,WAAWzB,CAAX,CAA7B,EAA4CA,GAA5C,EAAiD;AAC7C,yBAAKO,OAAL,CAAajB,EAAb,EAAiBkC,eAAjB,CAAiCG,KAAKC,IAAtC;AACH;AACD,qBAAKrB,OAAL,CAAajB,EAAb,EAAiBgC,IAAjB,CAAsBhC,EAAtB;AACH;AACJ;AAxDI;AARU,CAAvB;;AAoEAR,SAAS,QAAT,IAAqB;AACjBE,UAAM,gBAAW;AACb,eAAO,IAAP;AACH,KAHgB;AAIjBI,aAAS;AACLC,cAAM,cAASC,EAAT,EAAa;AACfP,2BAAeO,EAAf,IAAqB,EAArB;AACH,SAHI;AAILK,aAAK,aAASL,EAAT,EAAaE,GAAb,EAAkB;AACnB,mBAAOT,eAAeO,EAAf,EAAmBE,GAAnB,CAAP;AACH,SANI;AAOLD,aAAK,aAASD,EAAT,EAAaE,GAAb,EAAkBC,KAAlB,EAAyB;AAC1BV,2BAAeO,EAAf,EAAmBE,GAAnB,IAA0BC,KAA1B;AACH,SATI;AAULI,gBAAQ,gBAASP,EAAT,EAAaE,GAAb,EAAkB;AACtB,mBAAOT,eAAeO,EAAf,EAAmBE,GAAnB,CAAP;AACH,SAZI;AAaLO,eAAO,eAAST,EAAT,EAAa;AAChB,mBAAOP,eAAeO,EAAf,CAAP;AACH;AAfI;AAJQ,CAArB;;qBAuBeR,Q","file":"Solution.js","sourcesContent":["//存储服务\nvar Solution = {};\nvar _memoryStorage = {};\n\nSolution[\"localStorage\"] = {\n    test: function() {\n        try {\n            return window.localStorage ? true : false;\n        } catch (e) {\n            return false;\n        }\n    },\n    methods: {\n        init: function(ns) {},\n        set: function(ns, key, value) {\n            try {\n                localStorage.setItem(ns + key, value);\n            } catch (e) {\n                throw e;\n            }\n        }, //throw\n        get: function(ns, key) {\n            return localStorage.getItem(ns + key);\n        },\n        remove: function(ns, key) {\n            localStorage.removeItem(ns + key);\n        },\n        clear: function(ns) {\n            if (!ns) {\n                localStorage.clear();\n            } else {\n                for (var i = localStorage.length - 1, key; key = localStorage.key(i--);) {\n                    if (key && key.indexOf(ns) === 0) {\n                        localStorage.removeItem(key);\n                    }\n                }\n            }\n        }\n    }\n};\nSolution[\"userData\"] = {\n    test: function() {\n        try {\n            return window.ActiveXObject && document.documentElement.addBehavior ? true : false\n        } catch (e) {\n            return false;\n        }\n    },\n    methods: {\n        _owners: {},\n        init: function(ns) {\n            if (!this._owners[ns]) {\n                if (document.getElementById(ns)) {\n                    this._owners[ns] = document.getElementById(ns);\n                } else {\n                    var el = document.createElement('script'),\n                        head = document.head || document.getElementsByTagName(\"head\")[0] || document.documentElement;\n                    el.id = ns;\n                    el.style.display = 'none';\n                    el.addBehavior('#default#userdata');\n                    head.insertBefore(el, head.firstChild);\n                    this._owners[ns] = el;\n                }\n                try {\n                    this._owners[ns].load(ns);\n                } catch (e) {}\n                var _self = this;\n                window.attachEvent(\"onunload\", function() {\n                    _self._owners[ns] = null;\n                });\n            }\n        },\n        set: function(ns, key, value) {\n            if (this._owners[ns]) {\n                try {\n                    this._owners[ns].setAttribute(key, value);\n                    this._owners[ns].save(ns);\n                } catch (e) {\n                    throw e;\n                }\n            }\n        },\n        get: function(ns, key) {\n            if (this._owners[ns]) {\n                this._owners[ns].load(ns);\n                return this._owners[ns].getAttribute(key) || null;\n            }\n            return null;\n        },\n        remove: function(ns, key) {\n            if (this._owners[ns]) {\n                this._owners[ns].removeAttribute(key);\n                this._owners[ns].save(ns);\n            }\n        },\n        clear: function(ns) {\n            if (this._owners[ns]) {\n                var attributes = this._owners[ns].XMLDocument.documentElement.attributes;\n                this._owners[ns].load(ns);\n                for (var i = 0, attr; attr = attributes[i]; i++) {\n                    this._owners[ns].removeAttribute(attr.name)\n                }\n                this._owners[ns].save(ns);\n            }\n        }\n    }\n};\n\nSolution[\"memory\"] = {\n    test: function() {\n        return true;\n    },\n    methods: {\n        init: function(ns) {\n            _memoryStorage[ns] = {}\n        },\n        get: function(ns, key) {\n            return _memoryStorage[ns][key]\n        },\n        set: function(ns, key, value) {\n            _memoryStorage[ns][key] = value\n        },\n        remove: function(ns, key) {\n            delete _memoryStorage[ns][key]\n        },\n        clear: function(ns) {\n            delete _memoryStorage[ns]\n        }\n    }\n};\n\nexport default Solution;\n"]}